{% extends 'base.html.twig' %}
{% import 'macros/form_fields.html.twig' as macros %}

{% block title %}{{ editMode ? 'Modifier un utilisateur' : 'Créer un utilisateur' }}{% endblock %}

{% block body %}
    <div class="min-h-screen flex items-start justify-center mt-10">
        <div class="w-full max-w-4xl shadow-lg rounded-xl p-8 bg-gray-50">
            <h1 class="text-2xl font-bold mb-6 text-center text-gray-800">
                {{ editMode ? 'Modifier un utilisateur' : 'Créer un utilisateur' }}
            </h1>

            {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                {% for child in form %}
                    {% if child.vars.name not in ['_token'] %}
                        <div class="space-y-2">
                            {{ form_label(child, null, {'label_attr': {'class': 'text-black font-semibold'}}) }}

                            {% if child.vars.block_prefixes[1] == 'password' %}
                                {{ form_widget(child, {
                                    'attr': {
                                        'class': 'w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-black',
                                        'autocomplete': 'new-password'
                                    }
                                }) }}
                            {% elseif child.vars.block_prefixes[1] == 'file' %}
                                {{ form_widget(child, {
                                    'attr': {
                                        'class': 'w-full text-gray-800'
                                    }
                                }) }}
                            {% elseif child.vars.block_prefixes[1] not in ['submit', 'button'] %}
                                {{ form_widget(child, {
                                    'attr': {
                                        'class': 'w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-black'
                                    }
                                }) }}
                            {% endif %}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <div class="mt-8 flex justify-center">
                <button type="submit"
                        class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium transition">
                    {{ editMode ? 'Mettre à jour' : 'Valider' }}
                </button>
            </div>

            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}
